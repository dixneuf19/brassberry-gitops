ingress-nginx:
  controller:
    updateStrategy:
      rollingUpdate:
        maxUnavailable: 1
      type: RollingUpdate

    affinity:
      podAntiAffinity:
        preferredDuringSchedulingIgnoredDuringExecution:
        - weight: 100
          podAffinityTerm:
            labelSelector:
              matchExpressions:
              - key: app.kubernetes.io/name
                operator: In
                values:
                - ingress-nginx
              - key: app.kubernetes.io/instance
                operator: In
                values:
                - ingress-nginx
              - key: app.kubernetes.io/component
                operator: In
                values:
                - controller
            topologyKey: kubernetes.io/hostname

    replicaCount: 3

    metrics:
      enabled: true

      serviceMonitor:
        enabled: true
        namespace: "monitoring"
