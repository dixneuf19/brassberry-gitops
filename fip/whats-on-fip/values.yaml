generic:
  replicaCount: 2
  image:
    repository: dixneuf19/whatsonfip
    tag: 6003c68cc0fccddb455266b7c90723fc647ed11e
    pullPolicy: Always
  container:
    port: 80
    probe:
      liveness:
        path: /health
      readiness:
        path: /health
  resources:
    limits:
      memory: 128Mi
      cpu: 300m
    requests:
      memory: 64Mi
      cpu: 100m
  service:
    type: ClusterIP
    port: 1919
  ingress:
    enabled: false
  configmap:
    RADIO_FRANCE_API_HOST: 'https://openapi.radiofrance.fr/v1/graphql'
    RADIO_FRANCE_API_HEALTHCHECK: 'https://openapi.radiofrance.fr/v1/.well-known/apollo/server-health'
    SPOTIFY_API_HOST: spotify-api
    SPOTIFY_API_PORT: 1919
    OTEL_EXPORTER: otlp_span
    OTEL_EXPORTER_OTLP_ENDPOINT: "tempo.tracing.svc.cluster.local"
    OTEL_EXPORTER_OTLP_INSECURE: true
    OTEL_RESOURCE_ATTRIBUTES: "service.name=whatsonfip"
  secrets:
    - name: radio-france-api-token
      key: RADIO_FRANCE_API_TOKEN
  affinity:
    podAntiAffinity:
      preferredDuringSchedulingIgnoredDuringExecution:
        - weight: 100
          podAffinityTerm:
            labelSelector:
              matchExpressions:
                - key: app.kubernetes.io/name
                  operator: In
                  values:
                    - whats-on-fip
            topologyKey: kubernetes.io/hostname
